variables:
  DOCKER_DRIVER: overlay

stages:
- test

perl_critic_html:
  stage: test
  image: olegfiksel/perl_critic:latest
  script:
    - cd critic_html
    - critichtml test_perlver critichtml critictext
    - cd ../
    - mv critic_html/critic_html perl-critic-html
  artifacts:
    expire_in: 1 week
    paths:
    - perl-critic-html

perl_critic_text:
  stage: test
  image: olegfiksel/perl_critic:latest
  script:
    - cd critic_html
    - critictext test_perlver critichtml critictext

perl_test_perlver:
  stage: test
  image: olegfiksel/perl_critic:latest
  script:
    - cd critic_html
    - test_perlver test_perlver critichtml critictext